# ============================================================
# STATE TRANSFORMATION RULES
# Define how objects change state over time or based on conditions
# Matrix-based declarative physics and crafting system
# ============================================================

# ============================================================
# BASIC PHYSICS - Water/Ice Transformations
# ============================================================

[water_to_ice]
object_id = water
state = liquid
location_has_property = cold
turns_required = 3
new_state = frozen
new_object_id = ice
message = The water in the cup has completely frozen into solid ice!

[ice_to_water]
object_id = ice
state = frozen
turns_required = 3
new_state = liquid
new_object_id = water
message = The ice has melted back into water!

# ============================================================
# MAGIC SWORD CRAFTING SYSTEM
# Transform mundane iron into legendary magic!
# Total: 5 stages, 23 turns, +60 damage progression
# ============================================================

# STAGE 1: Purify the mundane sword in moonlight
[purify_iron_sword]
object_id = iron_sword
location = moonlit_grove
location_has_property = moonlight
turns_required = 5
new_state = purified
property_change = damage, +5
message = The sword gleams with silvery light as moonbeams purify the iron!

# STAGE 2: Imbue with moonstone at arcane altar
[imbue_moonstone]
object_id = iron_sword
state = purified
location = arcane_altar
location_has_object = moonstone
location_has_property = magical_energy
turns_required = 3
consume_objects = moonstone
new_state = moon_blessed
property_add = elemental_type, frost
property_change = damage, +10
message = The moonstone dissolves into the blade, infusing it with frost magic!

# STAGE 3: Bind dragon essence (requires dragon scale)
[bind_dragon_essence]
object_id = iron_sword
state = moon_blessed
location = dragon_shrine
location_has_object = dragon_scale
location_has_object_2 = sacred_flame
turns_required = 7
consume_objects = dragon_scale
new_state = dragon_forged
property_add = fire_resistance, 50
property_change = damage, +15
message = Dragon fire erupts! The scale melds into the blade, granting draconic power!

# STAGE 4: Inscribe ancient runes (requires enchanted_rune)
[inscribe_runes]
object_id = iron_sword
state = dragon_forged
location = wizard_tower
tool_required = runic_stylus
location_has_object = enchanted_rune
player_action_required = inscribe
turns_required = 5
consume_objects = enchanted_rune
new_state = rune_inscribed
property_add = mana_channeling, true
property_change = damage, +10
message = Glowing runes spiral across the blade, pulsing with arcane power!

# STAGE 5: Final awakening - become the magic sword!
[awaken_magic_sword]
object_id = iron_sword
state = rune_inscribed
location = arcane_altar
location_has_property = ley_line_convergence
player_action_required = speak_incantation
turns_required = 3
new_object_id = magic_sword
new_state = awakened
property_change = damage, +20
message = Reality bends! The sword transforms into a legendary artifact of immense power!

# ============================================================
# FAILURE MODES - Magic can go wrong!
# ============================================================

[failed_moonstone_imbue]
object_id = iron_sword
state = purified
location = arcane_altar
location_has_object = moonstone
location_missing_property = magical_energy
consume_objects = moonstone
new_state = corrupted
property_change = damage, -10
message = Without magical energy, the moonstone shatters! The blade is tainted with dark energy!

[overheat_dragon_binding]
object_id = iron_sword
state = moon_blessed
location = dragon_shrine
location_has_object = dragon_scale
turns_in_state = 10
new_state = melted
new_object_id = molten_metal
message = The sacred flame was too intense! The blade melts into useless slag!

# ============================================================
# COMPONENT GATHERING - Craft the ingredients
# ============================================================

[harvest_moonstone]
object_id = moon_crystal
location = moonlit_grove
location_has_property = full_moon
player_action_required = mine
tool_required = silver_pickaxe
turns_required = 5
spawn_object = moonstone
message = Under the full moon, you carefully extract a glowing moonstone!

[collect_dragon_scale]
object_id = slain_dragon
state = dead
player_action_required = harvest
tool_required = dragon_knife
turns_required = 3
spawn_object = dragon_scale
message = You pry loose a massive scale from the dragon's hide! It radiates heat!

[craft_enchanted_rune]
object_id = blank_runestone
location = wizard_tower
location_has_object = spell_focus
player_action_required = enchant
turns_required = 10
new_object_id = enchanted_rune
consume_objects = spell_focus
message = Arcane energy flows through you! The rune blazes with magical power!

# ============================================================
# FUTURE TRANSFORMATIONS
# Add more crafting, alchemy, and physics here!
# ============================================================

# Ideas:
# - Candles burning down over time
# - Food spoiling (fresh -> stale -> rotten)
# - Plants growing (seed -> sprout -> mature)
# - Potions brewing (ingredients -> potion)
# - Weapons degrading from combat use
# - Armor rusting in wet environments
# - Books decaying in damp rooms
